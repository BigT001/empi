# EMPI Delivery System - Architecture & Visual Diagrams

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CUSTOMER FRONTEND                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚   Product Page   â”‚      â”‚   Cart Page      â”‚                â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚   â”‚ - Add to cart    â”‚      â”‚ - View cart      â”‚                â”‚
â”‚   â”‚ - View details   â”‚      â”‚ - Change qty     â”‚                â”‚
â”‚   â”‚ - Select buy/    â”‚      â”‚ - View summary   â”‚                â”‚
â”‚   â”‚   rent mode      â”‚      â”‚ - DELIVERY       â”‚                â”‚
â”‚   â”‚                  â”‚      â”‚   SELECTOR â­    â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚          â”‚                           â”‚                           â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                          â”‚                                       â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                  â”‚  Checkout Page â”‚                              â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚                  â”‚ - Personal Infoâ”‚                              â”‚
â”‚                  â”‚ - Address      â”‚                              â”‚
â”‚                  â”‚ - DELIVERY     â”‚                              â”‚
â”‚                  â”‚   SELECTOR â­  â”‚                              â”‚
â”‚                  â”‚ - Order Review â”‚                              â”‚
â”‚                  â”‚ - Payment      â”‚                              â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                          â”‚                                       â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                â”‚ Order Confirmation â”‚                            â”‚
â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚                â”‚ - Order number     â”‚                            â”‚
â”‚                â”‚ - Delivery partner â”‚                            â”‚
â”‚                â”‚ - DELIVERY TRACKER â”‚                            â”‚
â”‚                â”‚   â­              â”‚                            â”‚
â”‚                â”‚ - Real-time status â”‚                            â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DELIVERY        â”‚ â”‚  ORDER         â”‚ â”‚  TRACKING     â”‚
â”‚  CALCULATOR      â”‚ â”‚  MANAGEMENT    â”‚ â”‚  SYSTEM       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Calculate fee  â”‚ â”‚ - Store order  â”‚ â”‚ - Assign      â”‚
â”‚ - Select vehicle â”‚ â”‚ - Store        â”‚ â”‚  delivery     â”‚
â”‚ - Determine zone â”‚ â”‚  delivery      â”‚ â”‚  partner      â”‚
â”‚ - Apply modifiersâ”‚ â”‚  details       â”‚ â”‚ - Update      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  status       â”‚
                                         â”‚ - Real-time   â”‚
                                         â”‚  location     â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DeliverySelector Component                     â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Header: "Delivery Method"                                â”‚   â”‚
â”‚  â”‚ Status: "ğŸï¸ Bike â€¢ â‚¦500"                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ STATE SELECTION                                          â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚   â”‚
â”‚  â”‚ Dropdown: [Select your state...]                        â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚ Input: items[] + state â”€â”€â”                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                   â”‚
â”‚                    calculateDeliveryFee()                        â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ZONE INFORMATION                                         â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚   â”‚
â”‚  â”‚ Zone: Southwest Region                                  â”‚   â”‚
â”‚  â”‚ States: Ogun, Oyo, Osun, Ekiti, Ondo                  â”‚   â”‚
â”‚  â”‚ Delivery: 2-4 days                                      â”‚   â”‚
â”‚  â”‚ Service: Active âœ…                                       â”‚   â”‚
â”‚  â”‚ Description: "South West Nigeria delivery service"      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DISTANCE SLIDER                                          â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚   â”‚
â”‚  â”‚ Estimated Distance: 50 km                               â”‚   â”‚
â”‚  â”‚ [â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”]                            â”‚   â”‚
â”‚  â”‚  1 km                    200 km                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DELIVERY OPTIONS                                         â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚   â”‚
â”‚  â”‚ â˜ Rush Delivery          +50%  (Lagos only)            â”‚   â”‚
â”‚  â”‚ â˜ Weekend Delivery       +30%  (All zones)             â”‚   â”‚
â”‚  â”‚ â˜ Holiday Delivery       +50%  (All zones)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ FEE BREAKDOWN                                            â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚   â”‚
â”‚  â”‚ Zone Base Fee         â‚¦3,000                            â”‚   â”‚
â”‚  â”‚ Vehicle (Car)         â‚¦2,500                            â”‚   â”‚
â”‚  â”‚ Size/Weight Adjust    â‚¦500                              â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚   â”‚
â”‚  â”‚ Total Delivery Fee    â‚¦6,000                            â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚ Est. Delivery: 2-4 days                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  onDeliveryChange(quote) â”€â”€â–¶ Update parent state              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Fee Calculation Process

```
ORDER CREATED
   â”‚
   â”œâ”€ Items: [Shirt, Pants, Shoes]
   â”œâ”€ Total Weight: 2.5 kg
   â”œâ”€ State: "Ibadan"
   â”‚
   â–¼
GET DELIVERY ZONE
   â”‚
   â”œâ”€ "Ibadan" â†’ STATE_TO_ZONE
   â”œâ”€ "Ibadan" = "Oyo" state
   â”œâ”€ "Oyo" = DeliveryZone.SOUTHWEST
   â”‚
   â–¼
DETERMINE VEHICLE
   â”‚
   â”œâ”€ Shirt: Small (< 5kg) â†’ Bike OK
   â”œâ”€ Pants: Small (< 5kg) â†’ Bike OK
   â”œâ”€ Shoes: Small (< 5kg) â†’ Bike OK
   â”œâ”€ Max Weight: 2.5 kg < 10 kg
   â”œâ”€ Required Vehicle: BIKE
   â”‚
   â–¼
CHECK ZONE AVAILABILITY
   â”‚
   â”œâ”€ Zone: SOUTHWEST
   â”œâ”€ Available Vehicles: [CAR, VAN]
   â”œâ”€ Required: BIKE
   â”œâ”€ Conflict! â†’ Downgrade to CAR
   â”‚
   â–¼
CALCULATE FEES
   â”‚
   â”œâ”€ Base Zone Fee: â‚¦3,000
   â”œâ”€ Distance: 50 km (estimated)
   â”œâ”€ Vehicle (Car): â‚¦50/km Ã— 50 = â‚¦2,500
   â”œâ”€ Size Multiplier (All Small): 1.0
   â”œâ”€ Size Adjustment: â‚¦0
   â”œâ”€ Subtotal: â‚¦5,500
   â”‚
   â”œâ”€ Check Modifiers:
   â”‚  â”œâ”€ Fragile? NO
   â”‚  â”œâ”€ Oversized? NO (2.5kg vs 50kg capacity)
   â”‚  â”œâ”€ Modifier Total: â‚¦0
   â”‚
   â–¼
FINAL QUOTE
   â”‚
   â”œâ”€ Total Fee: â‚¦5,500
   â”œâ”€ Vehicle: CAR
   â”œâ”€ Zone: SOUTHWEST
   â”œâ”€ Estimated: 2-4 days
   â”œâ”€ Warnings: []
   â”œâ”€ Recommendations: [
   â”‚    "Consider consolidating items to reduce costs"
   â”‚  ]
   â”‚
   â–¼
RETURN QUOTE
   {
     fee: 5500,
     vehicle: "car",
     zone: "southwest",
     estimatedDays: { min: 2, max: 4 },
     breakdown: { ... },
     warnings: [],
     recommendations: [...]
   }
```

---

## Zone Coverage Map

```
NIGERIA DELIVERY ZONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ NORTHEAST   â”‚  ğŸŸ  LIMITED
                        â”‚ â‚¦6,500      â”‚  (4-7 days)
                        â”‚ Van only    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                 â”‚                 â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ NORTHWEST   â”‚  â”‚ NORTH-CENTRAL  â”‚  â”‚ (NORTHEAST)  â”‚
      â”‚ â‚¦6,000      â”‚  â”‚ â‚¦5,500         â”‚  â”‚              â”‚
      â”‚ Van only    â”‚  â”‚ Van only       â”‚  â”‚              â”‚
      â”‚ (4-7 days)  â”‚  â”‚ (3-6 days)     â”‚  â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚                â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
            â”‚  â”‚              â”‚              â”‚ â”‚
            â”‚  â–¼              â–¼              â–¼ â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                    LAGOS & ENVIRONS                 â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ INTRA LAGOS (â‚¦0, Bike/Car/Van, 1-2 days)           â”‚
      â”‚ LAGOS METRO (â‚¦1,500, Car/Van, 1-3 days)            â”‚
      â”‚                                                      â”‚
      â”‚ SOUTHWEST (â‚¦3,000, Car/Van, 2-4 days)              â”‚
      â”‚ - Ogun, Oyo, Osun, Ekiti, Ondo                     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚                â”‚
            â”‚                 â”‚                â”‚
      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ SOUTH-SOUTH â”‚  â”‚ SOUTH-EAST     â”‚  â”‚              â”‚
      â”‚ â‚¦5,000      â”‚  â”‚ â‚¦5,000         â”‚  â”‚              â”‚
      â”‚ Van only    â”‚  â”‚ Van only       â”‚  â”‚              â”‚
      â”‚ (3-5 days)  â”‚  â”‚ (3-5 days)     â”‚  â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚                â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                         â”‚ COVERAGE â”‚
                         â”‚ AREA     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VEHICLE AVAILABILITY BY ZONE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Zone                  Bikes  Cars   Vans   Min Days  Max Days
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Intra Lagos           âœ…     âœ…     âœ…     1         2
Lagos Metro           âŒ     âœ…     âœ…     1         3
Southwest             âŒ     âœ…     âœ…     2         4
South-South           âŒ     âŒ     âœ…     3         5
Southeast             âŒ     âŒ     âœ…     3         5
North-Central         âŒ     âŒ     âœ…     3         6
Northwest             âŒ     âŒ     âœ…     4         7
Northeast             âŒ     âŒ     âœ…     4         7
                                           (LIMITED)
```

---

## Order Lifecycle Diagram

```
CUSTOMER PERSPECTIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. SHOPPING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Browse Items â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Add to Cart          â”‚
   â”‚ (Item Size/Weight)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
2. CHECKOUT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âœ… Personal Information             â”‚
   â”‚ âœ… Delivery State/Address           â”‚
   â”‚ âœ… DeliverySelector Component       â”‚
   â”‚    â”œâ”€ Select State                  â”‚
   â”‚    â”œâ”€ View Zone Info                â”‚
   â”‚    â”œâ”€ Adjust Distance/Options       â”‚
   â”‚    â”œâ”€ See Fee Breakdown             â”‚
   â”‚    â””â”€ Confirm Delivery              â”‚
   â”‚ âœ… Order Summary (Updated Total)    â”‚
   â”‚ âœ… Payment                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
3. ORDER CONFIRMATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Order #: ABC-123                    â”‚
   â”‚ Total: â‚¦15,000                      â”‚
   â”‚ Delivery Fee: â‚¦5,500                â”‚
   â”‚ Zone: SOUTHWEST                     â”‚
   â”‚ Vehicle: Car                        â”‚
   â”‚ ETA: 2-4 days                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
4. DELIVERY TRACKING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ DeliveryTracker Component            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Status: PICKED_UP âœ…                 â”‚
   â”‚ Partner: John Doe (â­ 4.8)           â”‚
   â”‚ Vehicle: ğŸš— Car                      â”‚
   â”‚ Location: Iwo Road, Ibadan           â”‚
   â”‚ ETA: 2 hours 45 mins                 â”‚
   â”‚ Timeline:                            â”‚
   â”‚   âœ… Order Confirmed (11:00)         â”‚
   â”‚   âœ… Picked Up (12:30)               â”‚
   â”‚   ğŸŸ¡ In Transit (13:45)              â”‚
   â”‚   â³ Out for Delivery (14:20)        â”‚
   â”‚ [Call Driver] button                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
5. DELIVERY
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âœ… Order Delivered (15:30)           â”‚
   â”‚                                      â”‚
   â”‚ Thank you for your order!            â”‚
   â”‚ Items delivered successfully         â”‚
   â”‚                                      â”‚
   â”‚ [Rate Delivery] [Reorder]            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


BACKEND/ADMIN PERSPECTIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ORDER RECEIVED
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Order Created          â”‚
   â”‚ - Items                â”‚
   â”‚ - Delivery Info        â”‚
   â”‚ - Fee (â‚¦5,500)         â”‚
   â”‚ - Status: PENDING      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
2. PAYMENT PROCESSING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Payment Confirmed      â”‚
   â”‚ Status: CONFIRMED      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
3. FULFILLMENT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Pick Items             â”‚
   â”‚ Pack Order             â”‚
   â”‚ Status: READY          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
4. DELIVERY ASSIGNMENT
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Assign Delivery Partner        â”‚
   â”‚ (Auto: based on zone/vehicle)  â”‚
   â”‚ Status: PICKED_UP              â”‚
   â”‚ Partner: John Doe              â”‚
   â”‚ Vehicle: Car                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
5. REAL-TIME TRACKING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Update Location/Status           â”‚
   â”‚ (Every 5-10 minutes)             â”‚
   â”‚ - Current Location (GPS)         â”‚
   â”‚ - Status: IN_TRANSIT             â”‚
   â”‚ - ETA update                     â”‚
   â”‚ - Customer notification          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
6. DELIVERY CONFIRMATION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Partner Confirms Delivery    â”‚
   â”‚ - Photo/Signature            â”‚
   â”‚ - Delivery time              â”‚
   â”‚ Status: DELIVERED            â”‚
   â”‚ Order Complete               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Schema - Order with Delivery

```typescript
{
  _id: ObjectId,
  
  // ORDER INFO
  orderNumber: "ORDER-2024-001234",
  status: "PENDING_PAYMENT" | "CONFIRMED" | "PACKED" | "SHIPPED" | "DELIVERED",
  createdAt: Date,
  updatedAt: Date,
  
  // BUYER INFO
  buyer: {
    name: "John Doe",
    email: "john@example.com",
    phone: "+234-123-456-7890",
    address: "123 Main Street, Ibadan",
    state: "Oyo",
    city: "Ibadan"
  },
  
  // ITEMS
  items: [
    {
      productId: ObjectId,
      name: "Cotton Shirt",
      quantity: 2,
      price: 5000,
      mode: "buy",
      size: "small",
      weight: 0.3,
      totalWeight: 0.6,
      fragile: false
    },
    // ... more items
  ],
  
  // NEW: DELIVERY INFORMATION â­
  delivery: {
    zone: "southwest",                    // DeliveryZone
    vehicle: "car",                       // VehicleType
    fee: 5500,                           // Calculated fee
    status: "picked_up",                 // DeliveryStatus
    estimatedDays: { min: 2, max: 4 },
    
    // LOCATION INFO
    pickupLocation: "EMPI Warehouse, Suru Lere",
    deliveryAddress: "123 Main Street, Ibadan",
    
    // DELIVERY PARTNER
    partner: {
      id: ObjectId,
      name: "John Doe (Driver)",
      phone: "+234-123-456-7890",
      vehicle: "blue_honda_accord",
      licensePlate: "ABC-123-XY",
      rating: 4.8,
      avatar: "https://..."
    },
    
    // TRACKING INFO
    currentLocation: {
      latitude: 7.3869,
      longitude: 3.8701,
      address: "Iwo Road, Ibadan",
      updatedAt: Date
    },
    
    estimatedArrival: Date,
    
    // TIMELINE
    timeline: [
      {
        status: "pending",
        timestamp: Date,
        location: "EMPI Warehouse"
      },
      {
        status: "confirmed",
        timestamp: Date,
        location: "EMPI Warehouse"
      },
      {
        status: "picked_up",
        timestamp: Date,
        location: "EMPI Warehouse"
      },
      {
        status: "in_transit",
        timestamp: Date,
        location: "Iwo Road, Ibadan"
      },
      // ... more events
    ],
    
    // MODIFIERS APPLIED
    modifiers: [
      { name: "Rush Delivery", amount: 2500 }
    ]
  },
  
  // PRICING
  subtotal: 10000,
  deliveryFee: 5500,
  tax: 1162.50,
  total: 16662.50,
  
  // PAYMENT
  payment: {
    method: "paystack",
    reference: "ref_123456",
    status: "completed",
    amount: 16662.50
  }
}
```

---

## Component Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Product Page / Cart Page                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                 â”‚
        â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProductCard     â”‚        â”‚  CartContext          â”‚
â”‚  (shows items)   â”‚        â”‚  (manages cart items) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â”‚ Includes size/weight/      â”‚ Includes size/weight/
        â”‚ fragile metadata           â”‚ fragile metadata
        â”‚                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  DeliverySelector Component    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Props:                         â”‚
        â”‚  - items: CartItemDelivery[]   â”‚
        â”‚  - state: string               â”‚
        â”‚  - onDeliveryChange: callback  â”‚
        â”‚  - isCheckout: boolean         â”‚
        â”‚                                â”‚
        â”‚ Uses:                          â”‚
        â”‚  - deliveryCalculator         â”‚
        â”‚  - deliverySystem             â”‚
        â”‚  - Lucide icons               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  deliveryCalculator.ts         â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Functions:                     â”‚
        â”‚  - calculateDeliveryFee()      â”‚
        â”‚  - determineRequiredVehicle()  â”‚
        â”‚  - calculateTotalWeight()      â”‚
        â”‚  - getSizeMultiplier()         â”‚
        â”‚  - getDeliveryZone()           â”‚
        â”‚                                â”‚
        â”‚ Uses:                          â”‚
        â”‚  - deliverySystem             â”‚
        â”‚  - STATE_TO_ZONE mapping      â”‚
        â”‚  - VEHICLE_CONFIGS            â”‚
        â”‚  - ITEM_SIZE_CATEGORIES       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  deliverySystem.ts             â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Exports:                       â”‚
        â”‚  - VehicleType enum            â”‚
        â”‚  - ItemSize enum               â”‚
        â”‚  - DeliveryZone enum           â”‚
        â”‚  - VEHICLE_CONFIGS             â”‚
        â”‚  - ITEM_SIZE_CATEGORIES        â”‚
        â”‚  - DELIVERY_ZONES              â”‚
        â”‚  - STATE_TO_ZONE mapping       â”‚
        â”‚  - All constants/configs       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Checkout Page                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                 â”‚
        â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Delivery        â”‚        â”‚  Order Summary        â”‚
â”‚  Selector        â”‚        â”‚  (shows total with    â”‚
â”‚  Component       â”‚        â”‚   delivery fee)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â”‚ Returns quote              â”‚ Gets fee from quote
        â”‚                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Order Creation                â”‚
        â”‚  (Save to DB with delivery)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Order Confirmation / Tracking Page                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  DeliveryTracker Component     â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Props:                         â”‚
        â”‚  - tracking: DeliveryTrackingInfo
        â”‚  - onContact: callback         â”‚
        â”‚                                â”‚
        â”‚ Features:                      â”‚
        â”‚  - Partner info display        â”‚
        â”‚  - Location map                â”‚
        â”‚  - ETA countdown               â”‚
        â”‚  - Timeline                    â”‚
        â”‚  - Contact button              â”‚
        â”‚                                â”‚
        â”‚ Uses:                          â”‚
        â”‚  - deliverySystem enums        â”‚
        â”‚  - Lucide icons                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Endpoint Architecture

```
DELIVERY SYSTEM API ENDPOINTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CALCULATE DELIVERY FEE
   POST /api/delivery/calculate
   â”œâ”€ Request: {
   â”‚    state: string,
   â”‚    items: CartItemDelivery[],
   â”‚    options?: { distanceKm, rushDelivery, ... }
   â”‚  }
   â””â”€ Response: DeliveryQuote

2. GET AVAILABLE ZONES
   GET /api/delivery/zones
   â”œâ”€ Request: (none)
   â””â”€ Response: DeliveryZone[]

3. GET ZONE DETAILS
   GET /api/delivery/zones/:zoneId
   â”œâ”€ Request: (none)
   â””â”€ Response: ZoneConfig

4. GET AVAILABLE STATES
   GET /api/delivery/states
   â”œâ”€ Request: (none)
   â””â”€ Response: string[]

5. GET VEHICLE CONFIGS
   GET /api/delivery/vehicles
   â”œâ”€ Request: (none)
   â””â”€ Response: VehicleConfig[]

6. CREATE ORDER WITH DELIVERY
   POST /api/orders
   â”œâ”€ Request: {
   â”‚    items: CartItem[],
   â”‚    delivery: DeliveryInfo,
   â”‚    buyer: BuyerInfo,
   â”‚    payment: PaymentInfo
   â”‚  }
   â””â”€ Response: Order

7. GET ORDER TRACKING
   GET /api/orders/:orderId/tracking
   â”œâ”€ Request: (none)
   â””â”€ Response: DeliveryTrackingInfo

8. UPDATE DELIVERY STATUS
   PATCH /api/orders/:orderId/delivery/status
   â”œâ”€ Request: {
   â”‚    status: DeliveryStatus,
   â”‚    location?: { lat, long },
   â”‚    note?: string
   â”‚  }
   â””â”€ Response: Order

9. GET DELIVERY PARTNER INFO
   GET /api/orders/:orderId/partner
   â”œâ”€ Request: (none)
   â””â”€ Response: DeliveryPartner

10. ESTIMATE DELIVERY COST RANGE (For display)
    GET /api/delivery/zones/:zoneId/cost-range
    â”œâ”€ Request: (none)
    â””â”€ Response: { min: number, max: number }
```

---

## Real-Time Tracking Update Flow

```
DELIVERY PARTNER APP / BACKEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Driver's Phone
    â”‚
    â”œâ”€ GPS Location (every 5 mins)
    â”‚
    â–¼
Backend Receives Update
    â”‚
    â”œâ”€ Parse Location
    â”œâ”€ Update DB: Order.delivery.currentLocation
    â”œâ”€ Update DB: Order.delivery.timeline
    â”‚
    â–¼
WebSocket Broadcast
    â”‚
    â”œâ”€ Send to Customer
    â”œâ”€ Send to Admin Dashboard
    â”œâ”€ Send to Customer App (real-time)
    â”‚
    â–¼
Frontend Components Update
    â”‚
    â”œâ”€ DeliveryTracker refreshes
    â”œâ”€ Map updates location
    â”œâ”€ ETA recalculates
    â”œâ”€ Timeline shows new entry
    â”‚
    â–¼
Customer Sees
    â”‚
    â”œâ”€ "ğŸš— In Transit"
    â”œâ”€ "ğŸ“ Location: Iwo Road, Ibadan"
    â”œâ”€ "â±ï¸ 2 hours 30 mins away"
    â”œâ”€ Timeline: "In Transit at 13:45"
    â”‚
    â–¼
Customer Can
    â”‚
    â”œâ”€ [Call Driver] button
    â”œâ”€ See exact location on map
    â”œâ”€ Get notification when nearby
    â””â”€ Rate driver after delivery
```

---

**Architecture Version**: 1.0
**Last Updated**: November 24, 2025
**Status**: Production Ready âœ…
